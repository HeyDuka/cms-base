Widget.types.page_type.types.default = {
	handle_preview: function(page_id, page_type) {
		
	},
	
	handle_admin: function(page_id, container, page_type) {
		var filled_modules = jQuery('<div/>').addClass('filled_modules').appendTo(container);
		var available_modules = jQuery('<ul/>').addClass('available_modules draggable').appendTo(container);
		
		page_type.callPageTypeMethod('adminListPossibleFrontendModules', function(modules) {
			var dragOptions = {
				cursor: "move",
				helper: function(event) {
					var element = jQuery(this);
					return element.clone().appendTo(available_modules).data('object_data', element.data('object_data'));
				},
				containment: ".contents_container",
				connectToSortable: '.filled_modules > .target'
			}
			jQuery.each(modules, function(module_type, module_name) {
				var element = jQuery('<li/>').text(module_name).data('module_type', module_type).draggable(dragOptions);
				element.appendTo(available_modules);
			});
		});
		
		page_type.callPageTypeMethod('adminListFilledFrontendModules', function(containers) {
			jQuery.each(containers, function(container_name, params) {
				var target = jQuery('<ul>').addClass('target '+container_name).attr('style', "float:left;width:40%;min-height:300px;border:1px solid red;").appendTo(filled_modules);

				jQuery.each(params.contents, function(object_id, content) {
					jQuery('<li/>').text(content.object_type_display_name).data('object_data', {object_id: object_id, object_type: content.object_type}).appendTo(target);
				});
			});
			
			filled_modules.find('.target').sortable({
				connectWith: filled_modules.find('.target')
			}).bind('sortstop', function(event, ui) {
				console.log(ui.item.data('object_data'));
			});
		});
		
		//Parser stuff
	}
};