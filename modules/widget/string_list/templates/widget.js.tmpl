jQuery(document).ready(function() {
	jQuery('.string_list').each(function() {
		jQuery(this).prepareWidget(function(widget) {
			Widget.callStaticWidgetMethod('detail', 'connect_detail_with_list', 'string', widget, 'setStringId');
			widget.handle('list.cell-click', function(event, rowIndex, col, row, cell) {
				if(col.identifier === 'delete') {
					var file_name = row.data('id');
					Widget.confirm("{{writeString=widget.delete_confirm}}", "{{writeString=string.delete_alert}} "+file_name, function(confirmed) {
						if(confirmed) {
							this.delete_row(row);
						}
					}.bind(this));
					event.stopPropagation();
				}
			});
			widget.handle('list.reloaded', function(event, list_length) {
				if(list_length === 0) {
					var search = widget.getSearch();
					var message = "{{writeParameterizedString=module.string_list.no_results;search=$\{search\};name_space=$\{name_space\}}}".replace(/\$\{search\}/, search).replace('${name_space}', widget.getOption('name_space'));
					Widget.notifyUser('info', message);
				}
			}, false, true);
		});
	});
});
