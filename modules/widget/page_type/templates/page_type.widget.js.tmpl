Widget.types.page_type = {
	initialize: function() {
		if(this.settings.page_type) {
			this.setPageType(this.settings.page_type, this.settings.page_id, this.settings.language_id);
		} else {
			this.settings.page_type = this.getPageType();
		}
		var js_location = this.getPageTypeJs();
		jQuery.ajax({
			url: js_location,
			dataType: 'script',
			async: false
		});
	},
	
	handle_preview: function() {
		Widget.types.page_type.types[this.settings.page_type].handle_preview(this.settings.page_id, this);
	},
	
	handle_admin: function() {
		if(this.settings.container.data('admin_handled')) {
			return;
		}
		this.settings.container.data('admin_handled', true);
		Widget.types.page_type.types[this.settings.page_type].handle_admin(this.settings.page_id, this.settings.container, this);
	},
	
	will_save: function() {
		if(Widget.types.page_type.types[this.settings.page_type].will_save) {
			Widget.types.page_type.types[this.settings.page_type].will_save(this.settings.page_id, this.settings.container, this);
		}
	},
	
	did_save: function() {
		if(Widget.types.page_type.types[this.settings.page_type].did_save) {
			Widget.types.page_type.types[this.settings.page_type].did_save(this.settings.page_id, this.settings.container, this);
		}
	},
	
	settings: {
		page_type: null,
		container: null,
		page_id: null,
		language_id: null
	},
	
	types: {}
};