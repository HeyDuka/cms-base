jQuery(document).ready(function() {
	var user_list = jQuery('table.user_list');
	user_list.each(function() {
		jQuery(this).prepareWidget(function(widget) {
			Widget.callStaticWidgetMethod('detail', 'connect_detail_with_list', 'user', widget, 'setUserId');
			widget.handle('list.cell-click', function(event, rowIndex, col, row, cell) {
				if(col.identifier === 'delete') {
					var user_name = widget.cell_for_identifier('username', row).text();
					Widget.confirm("{{writeString=widget.delete_confirm}}", "{{writeString=widget.user.delete_alert}} "+user_name, function(confirmed) {
						if(confirmed) {
							this.delete_row(row);
						}
					}.bind(this));
					event.stopPropagation();
				}
			});
			AdminInterface.strings.handle_strings_for_list_result('widget.user_list.no_result', ['group_id', 'user_kind'], widget);
		});
	});
});
