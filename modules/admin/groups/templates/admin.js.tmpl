jQuery(document).ready(function() {
	var group_list = AdminInterface.content.find('.group_list').getWidget();
	var info_bar = AdminInterface.info_bar.getWidget();
	info_bar.add_button('add-new-item', function() {
		Widget.create('group_detail', function(widget) {
			widget.open();
			widget.save_callback = function() {
				jQuery('.group_list.ui-list').each(function() {
					jQuery(this).getWidget().reload();
				});
			};
		});
	}, 'n', true).add_search_input("{{writeString=search.groups}}", function(search) {
		if(group_list.setSearch(search)) {
			group_list.reload();
		}
	});;
	
		// add row_count_info
	var row_count_info = info_bar.get_row_count_info();
	info_bar.add_element(row_count_info, true);
	var list_reload_handler = function() {
		row_count_info.text("{{writeParameterizedString=list_count;total=$\{total\};current=$\{current\}}}".replace(/\$\{total\}/, this.getNumberOfRows()).replace('${current}', this.current_row_count()));
	};
	list_reload_handler.call(group_list);
	group_list.handle('list.reloaded', list_reload_handler);
});